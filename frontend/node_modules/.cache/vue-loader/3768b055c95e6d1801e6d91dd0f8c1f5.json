{"remainingRequest":"/app/node_modules/vue-loader/lib/index.js??vue-loader-options!/app/src/views/Cart.vue?vue&type=script&lang=js&","dependencies":[{"path":"/app/src/views/Cart.vue","mtime":1604286953836},{"path":"/app/node_modules/cache-loader/dist/cjs.js","mtime":1603362890021},{"path":"/app/node_modules/babel-loader/lib/index.js","mtime":1603362890031},{"path":"/app/node_modules/cache-loader/dist/cjs.js","mtime":1603362890021},{"path":"/app/node_modules/vue-loader/lib/index.js","mtime":1603362889381}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBOYXZiYXIgZnJvbSAnLi4vY29tcG9uZW50cy9OYXZiYXInCmltcG9ydCB7IGdldEFQSSwgZ2V0QVBJd2l0aFRva2VufSBmcm9tICcuLi9heGlvcy1hcGknCi8vIGltcG9ydCB7IG1hcFN0YXRlIH0gZnJvbSAndnVleCcKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnQ2FydCcsCgogIGRhdGEgKCkgewogICAgcmV0dXJuIHsKICAgICAgICBDYXJ0RGF0YTogdGhpcy4kc3RvcmUuc3RhdGUuY2FydCwKICAgICAgICBPcmRlckRhdGE6IHRoaXMuJHN0b3JlLnN0YXRlLm9yZGVyLAogICAgICAgIFByb2R1Y3REYXRhOiBudWxsLCAvLyDkvLzkuY7opoHop7jnmbzororli5UgUHJvZHVjdERhdGHmiY3mnIPpoa/nj77vvIzlpoLmnpzlj6rmnIkge30g6YKjVGVtcGxhdGXkuZ/lj6rmnIPlh7rnj757fQogICAgICB9CiAgfSwKCiAgY29tcG9uZW50czogewogICAgTmF2YmFyCiAgfSwKCiAgY3JlYXRlZCAoKSB7CiAgICBnZXRBUEkuZ2V0KCcvYXBpL3Byb2R1Y3QvJywpCiAgICAudGhlbihyZXNwb25zZSA9PiB7CiAgICAgIC8vIHJlc3BvbnNlLmRhdGEucmVzdWx0cy5mb3JFYWNoKGVsZSA9PiAodGhpcy5Qcm9kdWN0RGF0YVtlbGUuaWRdPWVsZSkpCiAgICAgIC8vIHRoaXMuQ2FydERhdGEuZm9yRWFjaChlbGUgPT4gdGhpcy5pdGVtaW5mb3JtKGVsZSkpCiAgICAgIHRoaXMuUHJvZHVjdERhdGEgPSByZXNwb25zZS5kYXRhLnJlc3VsdHMKICAgIH0pCiAgICAuY2F0Y2goZXJyID0+IHsKICAgICAgY29uc29sZS5sb2coZXJyKQogICAgfSkKICB9LAoKICBtZXRob2RzOiB7CiAgICBkZWxldGVJdGVtKGlkKXsKICAgICAgZ2V0QVBJd2l0aFRva2VuLmRlbGV0ZSgnL2FwaS9vcmRlcml0ZW0vJywge2lkOiBpZH0pCiAgICAgIC50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZSkKICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7IG5hbWU6ICdjYXJ0JyB9KS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICAgIAogICAgICB9KQogICAgICAuY2F0Y2goZXJyID0+IHsKICAgICAgICBjb25zb2xlLmxvZyhlcnIpCiAgICAgIH0pCiAgICB9LAogICAgaXRlbWluZm9ybShlbGUpewogICAgICBlbGVbJ25hbWUnXSA9IHRoaXMuUHJvZHVjdERhdGFbZWxlLml0ZW1dLm5hbWUKICAgICAgZWxlWydwcmljZSddID0gdGhpcy5Qcm9kdWN0RGF0YVtlbGUuaXRlbV0ucHJpY2UKICAgIH0sCiAgICBmb3JtT3JkZXIoKXsKICAgICAgdmFyIGFkZHJlc3MgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiYWRkcmVzcyIpLnZhbHVlCiAgICAgIGdldEFQSXdpdGhUb2tlbi5wb3N0KCcvYXBpL29yZGVyLycsIHthZGRyZXNzOiBhZGRyZXNzfSkKICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlKQogICAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCd1c2VyUmVMb2dpbicpCiAgICAgICAgCiAgICAgIH0pCiAgICAgIC5jYXRjaChlcnIgPT4gewogICAgICAgIGNvbnNvbGUubG9nKGVycikKICAgICAgfSkKICAgIH0KICB9LAoKfQo="},{"version":3,"sources":["Cart.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2EA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA","file":"Cart.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n  <div class=\"products\">\r\n    <Navbar></Navbar> \r\n      <div class=\"album py-5 bg-light\">\r\n          <div class=\"container\">\r\n            <h2> Cart </h2>\r\n            <div class=\"card\">\r\n                <div class=\"row\" v-if=\"CartData.length==0\">\r\n                    <div class=\"col-md-12 text-left\">\r\n                        <h5 class=\"card-text text-left\">there is no item in cart.</h5>\r\n                    </div>\r\n                </div>\r\n                <div class=\"row\" v-for=\"cart in CartData\" :key=\"cart.id\">\r\n                  <div class=\"col-sm-12 d-flex justify-content-between\">\r\n                    <h5> {{ProductData[cart.item-1]['name']}} | {{ProductData[cart.item-1]['price']}} $</h5> \r\n                    <h5> {{cart.quantity}} pcs</h5>\r\n                    <button type=\"button\" class=\"btn btn-light\" v-on:click=\"deleteItem(cart.id)\">Delete</button>\r\n                  </div>\r\n                </div>\r\n                <div class=\"col\" v-if=\"CartData.length!=0\">\r\n                  <br>\r\n                  <p>Please enter the address for this order below: </p>\r\n                  <input type=\"text\" id=\"address\" name=\"address\" value=\"\" style=\"width:300px;height:60px\"> <br>\r\n                  <button type=\"button\" class=\"btn btn-light\" v-on:click=\"formOrder()\">Send Order</button>\r\n                </div>\r\n\r\n            </div>\r\n            <br><br>\r\n            <h2> Orders </h2>\r\n            <div class=\"card\">\r\n                <div class=\"row\" v-if=\"OrderData.length==0\">\r\n                    <div class=\"col-md-6 text-left\">\r\n                        <h5 class=\"card-text text-left\">there is no order formed yet.</h5>\r\n                    </div>\r\n                </div>\r\n                <div class=\"row\" v-for=\"order in OrderData\" :key=\"order.id\">\r\n                    <div class=\"col-md-6 text-left\">\r\n                        <h5 class=\"card-text text-left\">Order id:\r\n                          <span style=\"float:right;\">{{order.id}} </span>\r\n                        </h5>\r\n                        <h5 class=\"card-text text-left\">Order state:\r\n                          <span style=\"float:right;\">{{order.state}} </span>\r\n                        </h5>\r\n                        <h5 class=\"card-text text-left\">Order created_date:\r\n                          <span style=\"float:right;\">{{order.created_date.slice(0, 16)}} </span>\r\n                        </h5>                        \r\n                        <h5 class=\"card-text text-left\">Order address:\r\n                          <span style=\"float:right;\">{{order.address}} </span>\r\n                        </h5>\r\n                        <h5 class=\"card-text text-left\">Order total:\r\n                          <span style=\"float:right;\">{{order.total}} </span>\r\n                        </h5>\r\n                        <br><br>\r\n                    </div>\r\n                    <br>\r\n                    \r\n                    <div class=\"col-md-6 text-left\">\r\n                        <h5> Orders Items:</h5>\r\n                        <div v-for=\"item in order.orderitem_set\" :key=\"item.id\">\r\n                          <div class=\"col-sm-12 d-flex justify-content-between\">\r\n                            <h5> {{ProductData[item.item-1].name}} | {{ProductData[item.item-1].price}} $</h5>\r\n                            <h5>{{item.quantity}} pcs</h5>\r\n                          </div>\r\n                        </div>\r\n                        <br><br>\r\n                    </div>\r\n              </div>\r\n            </div>\r\n            \r\n          </div>\r\n      </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import Navbar from '../components/Navbar'\r\n  import { getAPI, getAPIwithToken} from '../axios-api'\r\n  // import { mapState } from 'vuex'\r\n\r\n  export default {\r\n    name: 'Cart',\r\n\r\n    data () {\r\n      return {\r\n          CartData: this.$store.state.cart,\r\n          OrderData: this.$store.state.order,\r\n          ProductData: null, // 似乎要觸發變動 ProductData才會顯現，如果只有 {} 那Template也只會出現{}\r\n        }\r\n    },\r\n\r\n    components: {\r\n      Navbar\r\n    },\r\n\r\n    created () {\r\n      getAPI.get('/api/product/',)\r\n      .then(response => {\r\n        // response.data.results.forEach(ele => (this.ProductData[ele.id]=ele))\r\n        // this.CartData.forEach(ele => this.iteminform(ele))\r\n        this.ProductData = response.data.results\r\n      })\r\n      .catch(err => {\r\n        console.log(err)\r\n      })\r\n    },\r\n\r\n    methods: {\r\n      deleteItem(id){\r\n        getAPIwithToken.delete('/api/orderitem/', {id: id})\r\n        .then(response => {\r\n          console.log(response)\r\n          this.$router.push({ name: 'cart' }).then(response => {\r\n            \r\n        })\r\n        .catch(err => {\r\n          console.log(err)\r\n        })\r\n      },\r\n      iteminform(ele){\r\n        ele['name'] = this.ProductData[ele.item].name\r\n        ele['price'] = this.ProductData[ele.item].price\r\n      },\r\n      formOrder(){\r\n        var address = document.getElementById(\"address\").value\r\n        getAPIwithToken.post('/api/order/', {address: address})\r\n        .then(response => {\r\n          console.log(response)\r\n          this.$store.dispatch('userReLogin')\r\n          \r\n        })\r\n        .catch(err => {\r\n          console.log(err)\r\n        })\r\n      }\r\n    },\r\n\r\n  }\r\n</script>\r\n\r\n<style scoped>\r\n  button {\r\n    width:100px;\r\n    height:30px;\r\n    position:relative;\r\n    padding:0em\r\n  }\r\n\r\n  input {\r\n    text-align: center;\r\n  }\r\n</style>\r\n\r\n"]}]}